<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Seed Masterlists</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="firebase-config.js"></script>
</head>
<body style="font-family:sans-serif;background:#111;color:#eee;padding:20px">
  <h1>Seed Scooty & Battery IDs</h1>
  <button id="seedScooty">Seed Scooty IDs</button>
  <button id="seedBattery">Seed Battery IDs</button>
  <div id="log"></div>

<script>
  const log = msg => {
    document.getElementById('log').innerHTML += msg + "<br>";
  };

  async function seed(file, collection) {
    const res = await fetch(file);
    const text = await res.text();
    const ids = text.split("\n").map(l=>l.trim()).filter(Boolean);

    for (let id of ids) {
      const ref = db.collection(collection).doc(id);
      const snap = await ref.get();
      if(!snap.exists){   // only add if missing
        await ref.set({
          active: true,
          assignedTo: null,
          lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
        });
        log(`✅ Added ${id} → ${collection}`);
      } else {
        log(`⚠️ Already exists: ${id}`);
      }
    }
  }

  document.getElementById('seedScooty').onclick = () => seed("assets/scootyid.txt","scooters");
  document.getElementById('seedBattery').onclick = () => seed("assets/batteryid.txt","batteries");
</script>
</body>
</html>
